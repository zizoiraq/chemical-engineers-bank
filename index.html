<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  /* ===== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† (Ø§ÙØªØ±Ø§Ø¶ÙŠ) ===== */
  :root[data-theme="dark"] {
    --primary: #0f2b5b;
    --accent: #f0a500;
    --accent2: #00c9a7;
    --danger: #e84545;
    --success: #2ecc71;
    --bg: #07162b;
    --card: #0d2240;
    --card2: #112952;
    --text: #e8f0fe;
    --muted: #7a94be;
    --border: #1e3f6e;
    --header-bg: #07162b;
    --footer-border: #1e3f6e;
    --search-btn-bg: #1e3f6e;
    --search-btn-color: #e8f0fe;
    --search-btn-border: #7a94be;
    --search-btn-hover-bg: #2a4a7a;
  }

  /* ===== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ ===== */
  :root[data-theme="light"] {
    --primary: #1e3a8a;
    --accent: #f59e0b;
    --accent2: #059669;
    --danger: #dc2626;
    --success: #10b981;
    --bg: #f3f4f6;
    --card: #ffffff;
    --card2: #f9fafb;
    --text: #111827;
    --muted: #4b5563;
    --border: #d1d5db;
    --header-bg: #ffffff;
    --footer-border: #e5e7eb;
    --search-btn-bg: #f3f4f6;
    --search-btn-color: #1f2937;
    --search-btn-border: #9ca3af;
    --search-btn-hover-bg: #e5e7eb;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Cairo', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* ===== BACKGROUND ===== */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse at 20% 20%, rgba(0,201,167,0.07) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(240,165,0,0.07) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 0%, rgba(15,43,91,0.5) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
    opacity: var(--bg-pattern-opacity, 0.5);
  }
  
  :root[data-theme="light"] body::before {
    --bg-pattern-opacity: 0.15;
  }

  .container {
    position: relative;
    z-index: 1;
    max-width: 900px;
    margin: 0 auto;
    padding: 20px 16px 60px;
  }

  /* ===== HEADER ===== */
  .site-header {
    text-align: center;
    padding: 36px 0 28px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 32px;
    background: var(--header-bg);
    transition: background-color 0.3s ease;
  }

  .site-header .logo {
    font-size: 2.2rem;
    font-weight: 900;
    color: var(--accent);
    letter-spacing: -1px;
    margin-bottom: 4px;
  }

  .site-header .sub {
    font-size: 0.95rem;
    color: var(--muted);
    font-family: 'Tajawal', sans-serif;
  }

  .site-header .university {
    font-size: 0.85rem;
    color: var(--accent2);
    margin-top: 6px;
    font-family: 'Tajawal', sans-serif;
  }

  /* ===== Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ ===== */
  .theme-toggle {
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 100;
  }
  
  .theme-toggle button {
    background: var(--card);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 30px;
    padding: 8px 16px;
    cursor: pointer;
    font-family: 'Tajawal', sans-serif;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.2s ease;
  }
  
  .theme-toggle button:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
  }
  
  .theme-toggle button span {
    font-size: 1.1rem;
  }

  /* ===== SCREENS ===== */
  .screen { display: none; }
  .screen.active { display: block; animation: fadeIn 0.4s ease; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* ===== SCREEN TITLE ===== */
  .screen-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 6px;
  }
  .screen-desc {
    font-size: 0.9rem;
    color: var(--muted);
    margin-bottom: 28px;
    font-family: 'Tajawal', sans-serif;
  }

  /* ===== SUBJECTS GRID ===== */
  .subjects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 14px;
  }

  .subject-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px 18px;
    cursor: pointer;
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    gap: 14px;
    position: relative;
    overflow: hidden;
  }

  .subject-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(240,165,0,0.05) 0%, transparent 60%);
    opacity: 0;
    transition: opacity 0.25s;
  }

  .subject-card:hover::before { opacity: 1; }
  .subject-card:hover {
    border-color: var(--accent);
    transform: translateY(-3px);
    box-shadow: 0 8px 28px rgba(0,0,0,0.3);
  }

  .subject-card.disabled {
    opacity: 0.45;
    cursor: not-allowed;
  }
  .subject-card.disabled:hover {
    transform: none;
    border-color: var(--border);
    box-shadow: none;
  }

  .subject-icon {
    font-size: 2rem;
    flex-shrink: 0;
    width: 48px;
    text-align: center;
  }

  .subject-info { flex: 1; }
  .subject-name {
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 2px;
  }
  .subject-en {
    font-size: 0.78rem;
    color: var(--accent2);
    font-family: 'Tajawal', sans-serif;
  }

  .subject-badge {
    font-size: 0.7rem;
    background: rgba(240,165,0,0.15);
    color: var(--accent);
    border: 1px solid rgba(240,165,0,0.3);
    border-radius: 20px;
    padding: 3px 10px;
    flex-shrink: 0;
  }

  .coming-badge {
    font-size: 0.7rem;
    background: rgba(122,148,190,0.1);
    color: var(--muted);
    border: 1px solid rgba(122,148,190,0.2);
    border-radius: 20px;
    padding: 3px 10px;
    flex-shrink: 0;
  }

  /* ===== LEVEL SCREEN ===== */
  .back-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--muted);
    font-size: 0.88rem;
    cursor: pointer;
    margin-bottom: 24px;
    transition: color 0.2s;
    font-family: 'Tajawal', sans-serif;
  }
  .back-btn:hover { color: var(--accent); }

  .subject-header {
    display: flex;
    align-items: center;
    gap: 14px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 28px;
  }

  .subject-header .big-icon { font-size: 2.5rem; }
  .subject-header h2 { font-size: 1.3rem; font-weight: 700; }
  .subject-header p { font-size: 0.85rem; color: var(--accent2); font-family: 'Tajawal', sans-serif; }

  .levels-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
  }

  .level-card {
    border-radius: 18px;
    padding: 28px 16px;
    text-align: center;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.25s ease;
    position: relative;
    overflow: hidden;
  }

  .level-card.easy {
    background: linear-gradient(145deg, #0a3020, #0d4028);
    border-color: #1a7a4a;
  }
  .level-card.medium {
    background: linear-gradient(145deg, #2a1d00, #3a2800);
    border-color: #7a5500;
  }
  .level-card.hard {
    background: linear-gradient(145deg, #2a0a0a, #3a0f0f);
    border-color: #7a1a1a;
  }

  .level-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0,0,0,0.4);
  }
  .level-card.easy:hover  { border-color: var(--success); }
  .level-card.medium:hover { border-color: var(--accent); }
  .level-card.hard:hover  { border-color: var(--danger); }

  .level-emoji { font-size: 2.4rem; margin-bottom: 12px; }
  .level-name { font-size: 1.1rem; font-weight: 700; margin-bottom: 6px; }
  .level-en { font-size: 0.78rem; font-family: 'Tajawal', sans-serif; margin-bottom: 10px; }
  .level-count { font-size: 0.8rem; opacity: 0.7; font-family: 'Tajawal', sans-serif; }

  .level-card.easy  .level-name { color: #5dde96; }
  .level-card.medium .level-name { color: #ffc840; }
  .level-card.hard  .level-name { color: #ff7070; }

  /* ===== QUIZ SCREEN ===== */
  .quiz-topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    flex-wrap: wrap;
    gap: 10px;
  }

  .quiz-info {
    font-size: 0.85rem;
    color: var(--muted);
    font-family: 'Tajawal', sans-serif;
  }

  .quiz-score {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--accent);
    background: rgba(240,165,0,0.1);
    border: 1px solid rgba(240,165,0,0.2);
    border-radius: 20px;
    padding: 4px 14px;
  }

  .progress-bar {
    width: 100%;
    height: 6px;
    background: var(--card);
    border-radius: 3px;
    margin-bottom: 24px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent2), var(--accent));
    border-radius: 3px;
    transition: width 0.4s ease;
  }

  .question-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 28px 24px;
    margin-bottom: 20px;
  }

  .question-num {
    font-size: 0.78rem;
    color: var(--accent2);
    font-family: 'Tajawal', sans-serif;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .question-text {
    font-size: 1.15rem;
    font-weight: 700;
    line-height: 1.7;
    color: var(--text);
  }

  .options-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .option-btn {
    background: var(--card);
    border: 1.5px solid var(--border);
    border-radius: 14px;
    padding: 16px 20px;
    text-align: right;
    cursor: pointer;
    color: var(--text);
    font-family: 'Cairo', sans-serif;
    font-size: 0.95rem;
    line-height: 1.6;
    transition: all 0.2s ease;
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .option-btn:hover:not(:disabled) {
    border-color: var(--accent2);
    background: rgba(0,201,167,0.06);
    transform: translateX(-3px);
  }

  .option-btn:disabled { cursor: not-allowed; }

  .option-btn.correct {
    border-color: var(--success);
    background: rgba(46,204,113,0.12);
    color: var(--text);
  }

  .option-btn.wrong {
    border-color: var(--danger);
    background: rgba(232,69,69,0.12);
    color: var(--text);
  }

  .opt-letter {
    width: 28px;
    height: 28px;
    border-radius: 8px;
    background: var(--card2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--muted);
    flex-shrink: 0;
    margin-top: 1px;
    transition: all 0.2s;
  }

  .option-btn.correct .opt-letter { background: rgba(46,204,113,0.3); color: #5dde96; }
  .option-btn.wrong   .opt-letter { background: rgba(232,69,69,0.3); color: #ff7070; }

  .explanation-box {
    display: none;
    background: var(--card2);
    border: 1px solid var(--border);
    border-right: 3px solid var(--accent2);
    border-radius: 14px;
    padding: 16px 18px;
    margin-top: 16px;
    font-size: 0.9rem;
    line-height: 1.7;
    color: var(--text);
    font-family: 'Tajawal', sans-serif;
    animation: fadeIn 0.3s ease;
  }
  .explanation-box.show { display: block; }

  /* ===== Ø²Ø± Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„ ===== */
  .google-search-container {
    display: none;
    margin-top: 12px;
    animation: fadeIn 0.3s ease;
  }
  
  .google-search-container.show {
    display: block;
  }
  
  .google-search-btn {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    border: 1px solid var(--search-btn-border);
    background: var(--search-btn-bg);
    color: var(--search-btn-color);
    font-family: 'Cairo', sans-serif;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }
  
  .google-search-btn:hover {
    background: var(--search-btn-hover-bg);
    transform: translateY(-2px);
    border-color: var(--accent2);
  }
  
  .google-search-btn span {
    font-size: 1.2rem;
  }

  .next-btn {
    display: none;
    width: 100%;
    margin-top: 20px;
    padding: 16px;
    border-radius: 14px;
    border: none;
    background: linear-gradient(135deg, var(--accent2), #00a589);
    color: #fff;
    font-family: 'Cairo', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.25s ease;
    letter-spacing: 0.3px;
  }
  .next-btn:hover { opacity: 0.9; transform: translateY(-2px); }
  .next-btn.show { display: block; animation: fadeIn 0.3s ease; }

  /* ===== RESULT SCREEN ===== */
  .result-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 24px;
    padding: 40px 28px;
    text-align: center;
    margin-bottom: 24px;
  }

  .result-emoji { font-size: 4rem; margin-bottom: 16px; }
  .result-title { font-size: 1.8rem; font-weight: 900; margin-bottom: 8px; }
  .result-sub {
    font-size: 0.95rem;
    color: var(--muted);
    font-family: 'Tajawal', sans-serif;
    margin-bottom: 28px;
  }

  .result-score-big {
    font-size: 4.5rem;
    font-weight: 900;
    color: var(--accent);
    line-height: 1;
    margin-bottom: 4px;
  }
  .result-score-label {
    font-size: 0.9rem;
    color: var(--muted);
    font-family: 'Tajawal', sans-serif;
    margin-bottom: 24px;
  }

  .result-stats {
    display: flex;
    justify-content: center;
    gap: 24px;
    flex-wrap: wrap;
    margin-bottom: 8px;
  }

  .stat-box {
    background: var(--card2);
    border-radius: 14px;
    padding: 14px 22px;
    min-width: 100px;
    border: 1px solid var(--border);
  }
  .stat-num { font-size: 1.8rem; font-weight: 900; }
  .stat-lbl { font-size: 0.75rem; color: var(--muted); font-family: 'Tajawal', sans-serif; }
  .stat-box.correct { border-color: rgba(46,204,113,0.3); }
  .stat-box.correct .stat-num { color: var(--success); }
  .stat-box.wrong   { border-color: rgba(232,69,69,0.3); }
  .stat-box.wrong   .stat-num { color: var(--danger); }

  .home-btn {
    width: 100%;
    padding: 16px;
    border-radius: 14px;
    border: 1.5px solid var(--border);
    background: transparent;
    color: var(--text);
    font-family: 'Cairo', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.25s ease;
  }
  .home-btn:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: rgba(240,165,0,0.05);
  }

  /* ===== COMING SOON MODAL ===== */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 100;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(4px);
  }
  .modal-overlay.show { display: flex; }

  .modal-box {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 36px 28px;
    text-align: center;
    max-width: 360px;
    width: 90%;
    animation: fadeIn 0.3s ease;
  }
  .modal-box .big { font-size: 3rem; margin-bottom: 12px; }
  .modal-box h3 { font-size: 1.3rem; font-weight: 700; margin-bottom: 8px; }
  .modal-box p { font-size: 0.9rem; color: var(--muted); font-family: 'Tajawal', sans-serif; margin-bottom: 24px; }

  .modal-close {
    padding: 12px 32px;
    border-radius: 12px;
    border: none;
    background: var(--accent);
    color: #000;
    font-family: 'Cairo', sans-serif;
    font-size: 0.95rem;
    font-weight: 700;
    cursor: pointer;
  }

  /* ===== FOOTER ===== */
  .site-footer {
    text-align: center;
    padding-top: 32px;
    border-top: 1px solid var(--footer-border);
    margin-top: 40px;
    font-size: 0.8rem;
    color: var(--muted);
    font-family: 'Tajawal', sans-serif;
  }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 600px) {
    .levels-grid { grid-template-columns: 1fr; }
    .subjects-grid { grid-template-columns: 1fr; }
    .result-stats { gap: 12px; }
    .question-text { font-size: 1.05rem; }
    .theme-toggle {
      position: relative;
      top: 0;
      left: 0;
      text-align: left;
      margin-bottom: 15px;
    }
    .theme-toggle button {
      margin-left: auto;
    }
  }
</style>
</head>
<body data-theme="dark">

<div class="container">

  <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ (ÙØ§ØªØ­/Ø¯Ø§ÙƒÙ†) -->
  <div class="theme-toggle">
    <button onclick="toggleTheme()">
      <span id="theme-icon">ğŸŒ™</span>
      <span id="theme-text">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</span>
    </button>
  </div>

  <!-- HEADER -->
  <header class="site-header">
    <div class="logo">ğŸ“ Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ</div>
    <div class="sub">Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ© â€” Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ©</div>
    <div class="university">Ù‡Ù†Ø¯Ø³Ø© ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØµÙ†Ø§Ø¹Ø§Øª Ø§Ù„ÙƒÙŠÙ…ÙŠØ§ÙˆÙŠØ© ÙˆØ§Ù„Ù†ÙØ·ÙŠØ© | ØªØµÙ…ÙŠÙ…: Ø¹Ø²Ø§Ù… Ø¹ØµØ§Ù…</div>
  </header>

  <!-- ============ SCREEN 1: SUBJECTS ============ -->
  <div id="screen-subjects" class="screen active">
    <div class="screen-title">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</div>
    <div class="screen-desc">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙŠÙ‡Ø§ Ù„ØªØ¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ø§Ù„ØªØ¹Ù„Ù…</div>

    <div class="subjects-grid" id="subjects-grid">
      <!-- Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø£ØµØ¨Ø­Øª Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù† - Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
    </div>
  </div>

  <!-- ============ SCREEN 2: LEVEL ============ -->
  <div id="screen-level" class="screen">
    <div class="back-btn" onclick="goToSubjects()">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆØ§Ø¯</div>

    <div class="subject-header">
      <div class="big-icon" id="level-icon"></div>
      <div>
        <h2 id="level-subject-name"></h2>
        <p id="level-subject-en"></p>
      </div>
    </div>

    <div class="screen-title">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div>
    <div class="screen-desc">ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 30 Ø³Ø¤Ø§Ù„ Ù…Ù† Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨</div>

    <div class="levels-grid">
      <div class="level-card easy" onclick="startQuiz('easy')">
        <div class="level-emoji">ğŸŸ¢</div>
        <div class="level-name">Ø³Ù‡Ù„</div>
        <div class="level-en">Easy</div>
        <div class="level-count">30 Ø³Ø¤Ø§Ù„ â€” ØªØ¹Ø±ÙŠÙØ§Øª ÙˆØ£Ø³Ø§Ø³ÙŠØ§Øª</div>
      </div>
      <div class="level-card medium" onclick="startQuiz('medium')">
        <div class="level-emoji">ğŸŸ¡</div>
        <div class="level-name">Ù…ØªÙˆØ³Ø·</div>
        <div class="level-en">Medium</div>
        <div class="level-count">30 Ø³Ø¤Ø§Ù„ â€” Ù„Ù…Ø§Ø°Ø§ ÙˆÙƒÙŠÙ</div>
      </div>
      <div class="level-card hard" onclick="startQuiz('hard')">
        <div class="level-emoji">ğŸ”´</div>
        <div class="level-name">ØµØ¹Ø¨</div>
        <div class="level-en">Hard</div>
        <div class="level-count">30 Ø³Ø¤Ø§Ù„ â€” ØªØ­Ù„ÙŠÙ„ ÙˆÙ…Ù‚Ø§Ø±Ù†Ø©</div>
      </div>
    </div>
  </div>

  <!-- ============ SCREEN 3: QUIZ ============ -->
  <div id="screen-quiz" class="screen">
    <div class="quiz-topbar">
      <div class="quiz-info" id="quiz-info"></div>
      <div class="quiz-score" id="quiz-score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>

    <div class="question-card">
      <div class="question-num" id="question-num"></div>
      <div class="question-text" id="question-text"></div>
    </div>

    <div class="options-list" id="options-list"></div>

    <div class="explanation-box" id="explanation-box"></div>
    
    <!-- Ø²Ø± Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„ -->
    <div class="google-search-container" id="google-search-container">
      <button class="google-search-btn" onclick="searchOnGoogle()">
        <span>ğŸ”</span> Ø¨Ø­Ø« ÙÙŠ Google
      </button>
    </div>
    
    <button class="next-btn" id="next-btn" onclick="nextQuestion()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â†</button>
  </div>

  <!-- ============ SCREEN 4: RESULT ============ -->
  <div id="screen-result" class="screen">
    <div class="result-card">
      <div class="result-emoji" id="result-emoji"></div>
      <div class="result-title" id="result-title"></div>
      <div class="result-sub" id="result-sub"></div>
      <div class="result-score-big" id="result-score-big"></div>
      <div class="result-score-label" id="result-score-label"></div>
      <div class="result-stats">
        <div class="stat-box correct">
          <div class="stat-num" id="stat-correct"></div>
          <div class="stat-lbl">Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© âœ…</div>
        </div>
        <div class="stat-box wrong">
          <div class="stat-num" id="stat-wrong"></div>
          <div class="stat-lbl">Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© âŒ</div>
        </div>
        <div class="stat-box">
          <div class="stat-num" id="stat-total"></div>
          <div class="stat-lbl">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</div>
        </div>
      </div>
    </div>
    <button class="home-btn" onclick="goToSubjects()">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ø¯</button>
  </div>

  <footer class="site-footer">
    ØªØµÙ…ÙŠÙ…: Ø¹Ø²Ø§Ù… Ø¹ØµØ§Ù… | Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ© â€” Ù‡Ù†Ø¯Ø³Ø© ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØµÙ†Ø§Ø¹Ø§Øª Ø§Ù„ÙƒÙŠÙ…ÙŠØ§ÙˆÙŠØ© ÙˆØ§Ù„Ù†ÙØ·ÙŠØ©
  </footer>
</div>

<!-- COMING SOON MODAL -->
<div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
  <div class="modal-box">
    <div class="big">ğŸš§</div>
    <h3>Ù‚Ø±ÙŠØ¨Ø§Ù‹</h3>
    <p id="modal-text"></p>
    <button class="modal-close" onclick="closeModal()">Ø­Ø³Ù†Ø§Ù‹</button>
  </div>
</div>

<!-- DATA FILES (ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ Ù…Ø¬Ù„Ø¯ data) -->
<script src="data/heat_transfer.js"></script>
<script src="data/mass_transfer.js"></script>
<script src="data/thermodynamics.js"></script>
<script src="data/Chemical Kinetics.js"></script>
<script src="data/Chemical Reactors.js"></script>
<script src="data/Organic Chemistry.js"></script>
<script src="data/Physical Chemistry.js"></script>
<script src="data/Analytical Chemistry.js"></script>
<script src="data/Petroleum Chemistry .js"></script>
<script src="data/Separation Processes.js"></script>
<script src="data/Process Engineering.js"></script>
<script src="data/Safety & Environment.js"></script>
<script src="data/Process Control.js"></script>
<script src="data/Corrosion.js"></script>

<script>
// ====== ØªØ¹Ø±ÙŠÙ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù…Ø¹ Ø£ÙŠÙ‚ÙˆÙ†Ø§ØªÙ‡Ø§ ======
const SUBJECTS = {
  heat_transfer: {
    name: 'Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ø­Ø±Ø§Ø±ÙŠ',
    en: 'Heat Transfer',
    icon: 'ğŸ”¥',
    data: () => HEAT_TRANSFER_QUESTIONS
  },
  mass_transfer: {
    name: 'Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ÙƒØªÙ„Ø©',
    en: 'Mass Transfer',
    icon: 'ğŸ’§',
    data: () => MASS_TRANSFER_QUESTIONS
  },
  thermodynamics: {
    name: 'Ø§Ù„Ø«Ø±Ù…ÙˆØ¯Ø§ÙŠÙ†Ù…Ùƒ',
    en: 'Thermodynamics',
    icon: 'âš¡',
    data: () => THERMODYNAMICS_QUESTIONS
  },
  chemical_kinetics: {
    name: 'Ø§Ù„Ø­Ø±ÙƒÙŠØ© Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ©',
    en: 'Chemical Kinetics',
    icon: 'âš—ï¸',
    data: () => CHEMICAL_KINETICS_QUESTIONS
  },
  chemical_reactors: {
    name: 'Ù…ÙØ§Ø¹Ù„Ø§Øª ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ©',
    en: 'Chemical Reactors',
    icon: 'ğŸ§ª',
    data: () => CHEMICAL_REACTORS_QUESTIONS
  },
  organic_chemistry: {
    name: 'Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©',
    en: 'Organic Chemistry',
    icon: 'ğŸ§¬',
    data: () => ORGANIC_CHEMISTRY_QUESTIONS
  },
  physical_chemistry: {
    name: 'Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ©',
    en: 'Physical Chemistry',
    icon: 'ğŸ”¬',
    data: () => PHYSICAL_CHEMISTRY_QUESTIONS
  },
  analytical_chemistry: {
    name: 'Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ÙŠØ©',
    en: 'Analytical Chemistry',
    icon: 'ğŸ“Š',
    data: () => ANALYTICAL_CHEMISTRY_QUESTIONS
  },
  petroleum_chemistry: {
    name: 'ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„Ù†ÙØ· ÙˆØ§Ù„Ø¨ØªØ±ÙˆÙƒÙŠÙ…ÙŠØ§ÙˆÙŠØ§Øª',
    en: 'Petroleum & Petrochemical Chemistry',
    icon: 'ğŸ›¢ï¸',
    data: () => PETROLEUM_CHEMISTRY_QUESTIONS
  },
  separation_processes: {
    name: 'Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙØµÙ„',
    en: 'Separation Processes',
    icon: 'ğŸ”€',
    data: () => SEPARATION_PROCESSES_QUESTIONS
  },
  process_engineering: {
    name: 'Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ©',
    en: 'Chemical Process Engineering',
    icon: 'ğŸ­',
    data: () => PROCESS_ENGINEERING_QUESTIONS
  },
  safety_environment: {
    name: 'Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ø¨ÙŠØ¦Ø©',
    en: 'Safety & Environmental Engineering',
    icon: 'ğŸ¦º',
    data: () => SAFETY_ENVIRONMENT_QUESTIONS
  },
  corrosion: {
    name: 'Ø§Ù„ØªØ¢ÙƒÙ„ ÙˆØ­Ù…Ø§ÙŠØ© Ø§Ù„Ù…ÙˆØ§Ø¯',
    en: 'Corrosion & Materials Protection',
    icon: 'ğŸ”©',
    data: () => CORROSION_QUESTIONS
  },
  process_control: {
    name: 'Ø§Ù„Ø³ÙŠØ·Ø±Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª',
    en: 'Process Control',
    icon: 'ğŸ›ï¸',
    data: () => PROCESS_CONTROL_QUESTIONS
  }
};

// ====== Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ ======
function renderSubjects() {
  const grid = document.getElementById('subjects-grid');
  grid.innerHTML = '';
  
  for (const [key, subject] of Object.entries(SUBJECTS)) {
    const card = document.createElement('div');
    card.className = 'subject-card';
    card.onclick = () => selectSubject(key);
    
    card.innerHTML = `
      <div class="subject-icon">${subject.icon}</div>
      <div class="subject-info">
        <div class="subject-name">${subject.name}</div>
        <div class="subject-en">${subject.en}</div>
      </div>
      <div class="subject-badge">Ù…ØªØ§Ø­</div>
    `;
    
    grid.appendChild(card);
  }
}

// ====== STATE ======
let currentSubject = null;
let currentLevel   = null;
let questions      = [];
let currentIndex   = 0;
let score          = 0;
let correctCount   = 0;
let wrongCount     = 0;
let answered       = false;
let currentQuestionText = '';

// ====== HELPERS ======
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

// ====== NAVIGATION ======
function goToSubjects() {
  showScreen('screen-subjects');
}

function selectSubject(key) {
  currentSubject = key;
  const s = SUBJECTS[key];
  document.getElementById('level-icon').textContent = s.icon;
  document.getElementById('level-subject-name').textContent = s.name;
  document.getElementById('level-subject-en').textContent = s.en;
  showScreen('screen-level');
}

function startQuiz(level) {
  currentLevel = level;
  const raw = SUBJECTS[currentSubject].data()[level];

  // Build questions with shuffled options
  questions = shuffle(raw).map(q => {
    const opts = shuffle([
      { text: q.a, correct: true },
      ...q.wrong.map(w => ({ text: w, correct: false }))
    ]);
    return { q: q.q, opts, explanation: q.a };
  });

  currentIndex = 0;
  score        = 0;
  correctCount = 0;
  wrongCount   = 0;

  showScreen('screen-quiz');
  renderQuestion();
}

// ====== QUIZ LOGIC ======
function renderQuestion() {
  const total = questions.length;
  const cur   = questions[currentIndex];
  const letters = ['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'];
  const levelName = { easy: 'Ø³Ù‡Ù„ ğŸŸ¢', medium: 'Ù…ØªÙˆØ³Ø· ğŸŸ¡', hard: 'ØµØ¹Ø¨ ğŸ”´' }[currentLevel];

  // Ø­ÙØ¸ Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„
  currentQuestionText = cur.q;

  // Progress
  document.getElementById('progress-fill').style.width = `${(currentIndex / total) * 100}%`;
  document.getElementById('quiz-info').textContent =
    `${SUBJECTS[currentSubject].name} | ${levelName}`;
  document.getElementById('quiz-score').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${score}`;
  document.getElementById('question-num').textContent = `Ø³Ø¤Ø§Ù„ ${currentIndex + 1} Ù…Ù† ${total}`;
  document.getElementById('question-text').textContent = cur.q;

  // Options
  const list = document.getElementById('options-list');
  list.innerHTML = '';
  cur.opts.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.className = 'option-btn';
    btn.innerHTML = `<span class="opt-letter">${letters[i]}</span><span>${opt.text}</span>`;
    btn.onclick = () => selectAnswer(i);
    list.appendChild(btn);
  });

  // Reset state
  answered = false;
  document.getElementById('explanation-box').className = 'explanation-box';
  document.getElementById('explanation-box').textContent = '';
  document.getElementById('google-search-container').className = 'google-search-container';
  document.getElementById('next-btn').className = 'next-btn';
  document.getElementById('next-btn').textContent =
    currentIndex === total - 1 ? 'Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© ğŸ†' : 'Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â†';
}

function selectAnswer(idx) {
  if (answered) return;
  answered = true;

  const cur  = questions[currentIndex];
  const btns = document.querySelectorAll('.option-btn');

  btns.forEach(b => b.disabled = true);

  if (cur.opts[idx].correct) {
    btns[idx].classList.add('correct');
    score++;
    correctCount++;
  } else {
    btns[idx].classList.add('wrong');
    wrongCount++;
    // Show correct
    cur.opts.forEach((o, i) => { if (o.correct) btns[i].classList.add('correct'); });
  }

  // Explanation
  const exp = document.getElementById('explanation-box');
  exp.textContent = 'ğŸ’¡ ' + cur.explanation;
  exp.className = 'explanation-box show';

  // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„
  document.getElementById('google-search-container').className = 'google-search-container show';
  
  document.getElementById('next-btn').className = 'next-btn show';
  document.getElementById('quiz-score').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${score}`;
}

function nextQuestion() {
  currentIndex++;
  if (currentIndex >= questions.length) {
    showResult();
  } else {
    renderQuestion();
  }
}

// ====== Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„ ======
function searchOnGoogle() {
  if (currentQuestionText) {
    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†Øµ Ù„Ù„Ø¨Ø­Ø«
    const searchQuery = encodeURIComponent(currentQuestionText);
    window.open(`https://www.google.com/search?q=${searchQuery}`, '_blank');
  }
}

// ====== RESULT ======
function showResult() {
  const total = questions.length;
  const pct   = Math.round((score / total) * 100);

  let emoji, title, sub;
  if (pct >= 90) { emoji = 'ğŸ†'; title = 'Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹!'; sub = 'Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹ØŒ Ø£Ù†Øª Ù…ØªÙ…ÙƒÙ† Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰'; }
  else if (pct >= 75) { emoji = 'ğŸ¥ˆ'; title = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹!'; sub = 'Ù†ØªÙŠØ¬Ø© Ù…Ù…ØªØ§Ø²Ø©ØŒ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù…'; }
  else if (pct >= 60) { emoji = 'ğŸ‘'; title = 'Ø¬ÙŠØ¯'; sub = 'ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø³ÙŠÙ† Ù†ØªÙŠØ¬ØªÙƒ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©'; }
  else if (pct >= 40) { emoji = 'ğŸ“–'; title = 'Ø¨Ø­Ø§Ø¬Ø© Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©'; sub = 'Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø§Ø¯Ø© ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©'; }
  else { emoji = 'ğŸ’ª'; title = 'Ù„Ø§ ØªØ³ØªØ³Ù„Ù…!'; sub = 'Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø±Ø© Ù‡ÙŠ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ù†Ø¬Ø§Ø­'; }

  document.getElementById('result-emoji').textContent = emoji;
  document.getElementById('result-title').textContent = title;
  document.getElementById('result-sub').textContent = sub;
  document.getElementById('result-score-big').textContent = pct + '%';
  document.getElementById('result-score-label').textContent = `${score} Ù…Ù† ${total} Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©`;
  document.getElementById('stat-correct').textContent = correctCount;
  document.getElementById('stat-wrong').textContent = wrongCount;
  document.getElementById('stat-total').textContent = total;

  document.getElementById('progress-fill').style.width = '100%';
  showScreen('screen-result');
}

// ====== MODAL ======
function showComing(name) {
  document.getElementById('modal-text').textContent =
    `Ù…Ø§Ø¯Ø© "${name}" Ø³ØªÙƒÙˆÙ† Ù…ØªØ§Ø­Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹ØŒ ØªØ§Ø¨Ø¹Ù†Ø§ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª!`;
  document.getElementById('modal-overlay').classList.add('show');
}

function closeModal(e) {
  if (!e || e.target === document.getElementById('modal-overlay') || !e.target) {
    document.getElementById('modal-overlay').classList.remove('show');
  }
}

// ====== ÙˆØ¸Ø§Ø¦Ù ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ (ÙØ§ØªØ­/Ø¯Ø§ÙƒÙ†) ======
function toggleTheme() {
  const html = document.documentElement;
  const currentTheme = html.getAttribute('data-theme') || 'dark';
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  
  html.setAttribute('data-theme', newTheme);
  
  // ØªØ­Ø¯ÙŠØ« Ù†Øµ ÙˆØ£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø²Ø±
  const themeIcon = document.getElementById('theme-icon');
  const themeText = document.getElementById('theme-text');
  
  if (newTheme === 'dark') {
    themeIcon.textContent = 'ğŸŒ™';
    themeText.textContent = 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†';
  } else {
    themeIcon.textContent = 'â˜€ï¸';
    themeText.textContent = 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­';
  }
  
  // Ø­ÙØ¸ Ø§Ù„ØªÙØ¶ÙŠÙ„ ÙÙŠ localStorage
  localStorage.setItem('preferred-theme', newTheme);
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ù…Ø³Ø¨Ù‚Ø§Ù‹
function loadSavedTheme() {
  const savedTheme = localStorage.getItem('preferred-theme') || 'dark';
  document.documentElement.setAttribute('data-theme', savedTheme);
  
  const themeIcon = document.getElementById('theme-icon');
  const themeText = document.getElementById('theme-text');
  
  if (savedTheme === 'dark') {
    themeIcon.textContent = 'ğŸŒ™';
    themeText.textContent = 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†';
  } else {
    themeIcon.textContent = 'â˜€ï¸';
    themeText.textContent = 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­';
  }
}

// ====== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© ======
window.onload = function() {
  renderSubjects();
  loadSavedTheme();
};
</script>

</body>
</html>
